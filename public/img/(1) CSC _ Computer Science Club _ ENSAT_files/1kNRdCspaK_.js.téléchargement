if (self.CavalryLogger) { CavalryLogger.start_js(["yM6AO"]); }

__d("GamerGraphUserActionsTypedLogger",["Banzai","GeneratedLoggerUtils","nullthrows"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(){this.clear()}a.prototype.log=function(){b("GeneratedLoggerUtils").log("logger:GamerGraphUserActionsLoggerConfig",this.$1,b("Banzai").BASIC)};a.prototype.logVital=function(){b("GeneratedLoggerUtils").log("logger:GamerGraphUserActionsLoggerConfig",this.$1,b("Banzai").VITAL)};a.prototype.logImmediately=function(){b("GeneratedLoggerUtils").log("logger:GamerGraphUserActionsLoggerConfig",this.$1,{signal:!0})};a.prototype.clear=function(){this.$1={};return this};a.prototype.getData=function(){return babelHelpers["extends"]({},this.$1)};a.prototype.updateData=function(a){this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.setContainerGameIds=function(a){this.$1.container_game_ids=b("GeneratedLoggerUtils").serializeVector(a);return this};a.prototype.setContainerID=function(a){this.$1.container_id=a;return this};a.prototype.setCount=function(a){this.$1.count=a;return this};a.prototype.setEvent=function(a){this.$1.event=a;return this};a.prototype.setGameID=function(a){this.$1.game_id=a;return this};a.prototype.setSeconds=function(a){this.$1.seconds=a;return this};a.prototype.setTargetID=function(a){this.$1.target_id=a;return this};a.prototype.setVC=function(a){this.$1.vc=a;return this};a.prototype.setVideoType=function(a){this.$1.video_type=a;return this};a.prototype.updateExtraData=function(a){a=b("nullthrows")(b("GeneratedLoggerUtils").serializeMap(a));b("GeneratedLoggerUtils").checkExtraDataFieldNames(a,g);this.$1=babelHelpers["extends"]({},this.$1,a);return this};a.prototype.addToExtraData=function(a,b){var c={};c[a]=b;return this.updateExtraData(c)};var g={container_game_ids:!0,container_id:!0,count:!0,event:!0,game_id:!0,seconds:!0,target_id:!0,vc:!0,video_type:!0};e.exports=a}),null);
__d("GamerGraphUserActionsEvent",[],(function(a,b,c,d,e,f){e.exports=Object.freeze({COMMENT:"comment",REACT:"react",SHARE:"share",POST:"post",JOIN_GROUP:"join_group",TAG_GROUP:"tag_group",TAG_PAGE:"tag_page",FOLLOW_PAGE:"follow_page",UNFOLLOW_PAGE:"unfollow_page",LIKE_PAGE:"like_page",UNLIKE_PAGE:"unlike_page",TAG_VIDEO:"tag_video",CONSUME_TIME:"consume_time",ACCEPT_DROP:"accept_drop",HEARTBEAT_TIME:"heartbeat_time",START_TIME:"start_time",END_TIME:"end_time",GAME_STATS_UPDATE:"game_stats_update",GAME_PERSONA_LINK:"game_persona_link",QUERY_ITEMS:"query_items",GET_ITEM:"get_item",MARK_ITEM:"mark_item",DROP_ITEM:"drop_item",TIP:"tip",SEND_CUSTOM_STICKER:"send_custom_sticker",SEARCH:"search",FOLLOW_GAME:"follow_game",UNFOLLOW_GAME:"unfollow_game",GAME_HUB_VISIT:"game_hub_visit",LEAVE_GROUP:"leave_group",UNSUBSCRIBE_PAGE_NOTIFICATION:"unfollow_page_notification",KPS_MEGAPHONE_IMPRESSION_WITH_PERSONA:"kps_megaphone_impression_with_persona",KPS_MEGAPHONE_IMPRESSION_WITHOUT_PERSONA:"kps_megaphone_impression_without_persona",KPS_MEGAPHONE_OPT_IN:"kps_megaphone_opt_in",KPS_MEGAPHONE_OPT_OUT:"kps_megaphone_opt_out",KPS_PRIVACY_TOGGLE_ON:"kps_privacy_toggle_on",KPS_PRIVACY_TOGGLE_OFF:"kps_privacy_toggle_off",KPS_FORCE_UPDATE:"kps_force_update",KPS_VIEW_HOVERCARD:"kps_view_hovercard",KPS_VIEW_FINDPLAYERS:"kps_view_findplayers",INSTREAM_REWARD_NUX_IMPRESSION:"instream_reward_nux_impression",INSTREAM_REWARD_NUX_CLOSE:"instream_reward_nux_close",INSTREAM_REWARD_GIFT_STARS:"instream_reward_gift_stars",INSTREAM_REWARD_ALERT_CLOSE:"instream_reward_alert_close",INSTREAM_REWARD_ALERT_EXPIRE:"instream_reward_alert_expire",INSTREAM_REWARD_NUX_DONTSHOW:"instream_reward_nux_dontshow"})}),null);
__d("VideoLootDropAlertDescription.react",["cx","fbt","DateConsts","React","XUIButton.react"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=30;i=babelHelpers.inherits(a,b("React").Component);i&&i.prototype;a.prototype.$1=function(){if(!this.props.secondsLeft)return null;var a=Math.max(this.props.secondsLeft,0),c=Math.floor(a/b("DateConsts").SEC_PER_MIN),d=a%b("DateConsts").SEC_PER_MIN,e=d<10?"0":"";return b("React").createElement("span",{className:(a<=j?"_22kd":"")+(a>j?" _22ke":"")},c+":"+e+d)};a.prototype.render=function(){return b("React").createElement("div",{className:"_22ky"},b("React").createElement("div",{className:"_3c0h"},typeof this.props.secondsLeft==="number"?b("React").createElement("div",{className:"_22lb"},h._("DISPARA\u00ceT DANS {Time Remaining}",[h._param("Time Remaining",this.$1())])):null,this.props.title?b("React").createElement("div",{className:"_3c0i"},this.props.title):null,this.props.description?b("React").createElement("div",{className:"_3c0-"},this.props.description):null),b("React").createElement("div",{className:"_69bq"},this.props.showCloseButton?b("React").createElement(b("XUIButton.react"),{className:"_22lc",use:"default",label:h._("Fermer"),onClick:this.props.onClose}):null,this.props.showClaimButton?b("React").createElement(b("XUIButton.react"),{className:"_22lc",disabled:this.props.isLoading,use:"special",label:h._("Revendiquer"),onClick:this.props.onClaim}):null))};function a(){i.apply(this,arguments)}a.defaultProps={showClaimButton:!0};e.exports=a}),null);
__d("Video.react",["React","ReactDOM"],(function(a,b,c,d,e,f){__p&&__p();var g;c=b("React").PropTypes;g=babelHelpers.inherits(a,b("React").Component);g&&g.prototype;a.prototype.componentDidMount=function(){"use strict";var a=b("ReactDOM").findDOMNode(this.refs.video);this.props.paused&&a&&a.pause&&a.pause()};a.prototype.UNSAFE_componentWillUpdate=function(a,c){"use strict";c=b("ReactDOM").findDOMNode(this.refs.video);a.playbackRate&&(c.playbackRate=a.playbackRate);a.paused!=this.props.paused&&c&&(a.paused&&c.pause?c.pause():c.play&&c.play())};a.prototype.render=function(){"use strict";return b("React").createElement("video",babelHelpers["extends"]({},this.props,{ref:"video"}))};function a(){"use strict";g.apply(this,arguments)}a.propTypes={autoPlay:c.bool,paused:c.bool,controls:c.bool,height:c.oneOfType([c.string,c.number]),loop:c.bool,muted:c.bool,onAbort:c.func,onCanPlay:c.func,onCanPlayThrough:c.func,onDurationChange:c.func,onEmptied:c.func,onEncrypted:c.func,onEnded:c.func,onError:c.func,onLoadedData:c.func,onLoadedMetadata:c.func,onLoadStart:c.func,onPause:c.func,onPlay:c.func,onPlaying:c.func,onProgress:c.func,onRateChange:c.func,onSeeked:c.func,onSeeking:c.func,onStalled:c.func,onSuspend:c.func,onTimeUpdate:c.func,onVolumeChange:c.func,onWaiting:c.func,playbackRate:c.number,poster:c.string,src:c.string.isRequired,width:c.oneOfType([c.string,c.number])};e.exports=a}),null);
__d("VideoLootDropAlertVisualAsset.react",["cx","Image.react","React","ShimButton.react","Video.react","XUISpinner.react"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h;h=babelHelpers.inherits(a,b("React").Component);h&&h.prototype;a.prototype.render=function(){var a=b("React").createElement(b("Image.react"),{className:"_llu",src:this.props.src}),c=this.props.src instanceof String?b("React").createElement(b("Video.react"),{className:"_llu",autoPlay:!0,controls:!1,muted:!0,loop:this.props.idle,onEnded:this.props.onEnded,onPlay:this.props.onPlay,src:this.props.src}):null,d=this.props.isLoading&&this.props.canShowLoadingSpinner?b("React").createElement("div",{className:"_22kg"},b("React").createElement(b("XUISpinner.react"),{background:"dark",size:"large"})):null;return b("React").createElement(b("ShimButton.react"),{onClick:this.props.onClaim},b("React").createElement("div",{className:"_lli"},a,c,d))};function a(){h.apply(this,arguments)}e.exports=a}),null);
__d("VideoLootDropCommentInput.react",["cx","fbt","AbstractTextInput.react","EventListener","React","ReactDOM"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;c=babelHelpers.inherits(a,b("React").Component);i=c&&c.prototype;function a(){var a,b;for(var c=arguments.length,d=Array(c),e=0;e<c;e++)d[e]=arguments[e];return b=(a=i.constructor).call.apply(a,[this].concat(d)),this.$3=function(event){var a=event.target.value;this.props.onChange&&this.props.onChange(a)}.bind(this),this.$4=function(event){event.key==="Enter"&&(this.props.onEnter&&this.props.onEnter())}.bind(this),b}a.prototype.componentDidMount=function(){this.$1=b("EventListener").listen(b("ReactDOM").findDOMNode(this),"keyup",this.$2)};a.prototype.componentWillUnmount=function(){this.$1&&this.$1.remove()};a.prototype.$2=function(event){event.stopPropagation()};a.prototype.render=function(){return b("React").createElement(b("AbstractTextInput.react"),{className:"_4iz-",disabled:this.props.isLoading,onChange:this.$3,placeholder:h._("Votre commentaire..."),onKeyDown:this.$4})};e.exports=a}),null);
__d("VideoComponentLootDropAlert.react",["fbt","cx","FDSButton.react","React","VideoLootDropAlertDescription.react","VideoLootDropAlertVisualAsset.react","VideoLootDropCommentInput.react","XUICloseButton.react","joinClasses"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i;i=babelHelpers.inherits(a,b("React").PureComponent);i&&i.prototype;a.prototype.$1=function(){return b("React").createElement("div",{className:"_48en"},b("React").createElement(b("VideoLootDropCommentInput.react"),{isLoading:this.props.isLoading,onChange:this.props.onChange,onEnter:this.props.onGift}),b("React").createElement(b("FDSButton.react"),{label:g._("Envoyer"),onClick:this.props.onGift,isDisabled:this.props.isLoading}))};a.prototype.render=function(){return b("React").createElement("div",{className:b("joinClasses")(this.props.className,"_3c0f")},b("React").createElement("div",{className:"_22ku"},b("React").createElement(b("VideoLootDropAlertVisualAsset.react"),{src:this.props.src,isLoading:this.props.isLoading,onClaim:this.props.onClaim,onPlay:this.props.onPlay,onEnded:this.props.onEnded,idle:this.props.idle,canShowLoadingSpinner:this.props.canShowLoadingSpinner}),b("React").createElement(b("VideoLootDropAlertDescription.react"),{description:this.props.itemDescription,isLoading:this.props.isLoading,onClaim:this.props.onClaim,onClose:this.props.onClose,onGift:this.props.onGift,onChange:this.props.onChange,secondsLeft:this.props.secondsLeft,showClaimButton:this.props.showClaimButton,showCloseButton:this.props.showCloseButton,title:this.props.itemTitle})),this.props.showGiftButton?this.$1():null,b("React").createElement(b("XUICloseButton.react"),{className:"_22l5",onClick:this.props.onClose,shade:"light"}))};function a(){i.apply(this,arguments)}a.defaultProps={showClaimButton:!0,showCloseButton:!1,showGiftButton:!1,canShowLoadingSpinner:!1};e.exports=a}),null);
__d("XLootDropAcceptController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/video/lootdrop/accept/{video_id}/",{video_id:{type:"FBID",required:!0},comment:{type:"String"},item_id:{type:"FBID"}})}),null);
__d("VideoLootDropAlertContainer.react",["cx","fbt","AsyncRequest","AsyncResponse","GamerGraphUserActionsEvent","GamerGraphUserActionsTypedLogger","DateConsts","React","VideoComponentLootDropAlert.react","XLootDropAcceptController"],(function(a,b,c,d,e,f,g,h){"use strict";__p&&__p();var i,j=b("DateConsts").MS_PER_SEC,k=1e3;c=babelHelpers.inherits(a,b("React").PureComponent);i=c&&c.prototype;function a(){__p&&__p();var a,c;for(var d=arguments.length,e=Array(d),f=0;f<d;f++)e[f]=arguments[f];return c=(a=i.constructor).call.apply(a,[this].concat(e)),this.state={claimed:!1,loading:!1,lootItem:null,secondsLeft:this.$1(),videoDidPlay:!1,videoDidEnd:!1,hideItemBufferExpired:!1,comment:""},this.$5=function(){this.setState({secondsLeft:this.$1()})}.bind(this),this.$6=function(a){this.setState({loading:!1,lootItem:a.payload}),clearInterval(this.$3)}.bind(this),this.$7=function(){if(this.state.loading)return;this.setState({loading:!0,claimed:!0,videoDidPlay:!1,videoDidEnd:!1,hideItemBufferExpired:!1});this.$4=setTimeout(function(){this.setState({hideItemBufferExpired:!0})}.bind(this),k);this.$2=new(b("AsyncRequest"))().setURI(b("XLootDropAcceptController").getURIBuilder().setFBID("video_id",this.props.videoID).getURI()).setMethod("POST").setHandler(this.$6);this.$2.send()}.bind(this),this.$8=function(){this.props.onRemove&&this.props.onRemove(),new(b("GamerGraphUserActionsTypedLogger"))().setEvent(b("GamerGraphUserActionsEvent").INSTREAM_REWARD_ALERT_CLOSE).setContainerID(this.props.ownerID).setTargetID(this.props.videoID).setGameID(this.props.gameID).log()}.bind(this),this.$9=function(a){this.setState({comment:a})}.bind(this),this.$10=function(a){this.props.onRemove&&this.props.onRemove()}.bind(this),this.$11=function(){if(this.state.loading)return;this.setState({loading:!0,claimed:!0,hideItemBufferExpired:!1});this.$4=setTimeout(function(){this.setState({hideItemBufferExpired:!0})}.bind(this),k);this.$2=new(b("AsyncRequest"))().setURI(b("XLootDropAcceptController").getURIBuilder().setFBID("video_id",this.props.videoID).setFBID("item_id",this.state.lootItem==null?"0":this.state.lootItem.itemID).setString("comment",this.state.comment).getURI()).setMethod("POST").setHandler(this.$10);this.$2.send()}.bind(this),c}a.prototype.componentWillUnmount=function(){this.$2&&this.$2.abort(),clearInterval(this.$3),clearTimeout(this.$4)};a.prototype.componentDidMount=function(){this.$3=setInterval(this.$5,j)};a.prototype.$1=function(){return Math.max(0,this.props.lootChest.expireTime-Math.floor(Date.now()/j))};a.prototype.$12=function(){return!this.state.claimed&&this.state.secondsLeft<=0};a.prototype.$13=function(){if(!this.state.lootItem)return!1;return this.state.videoDidPlay&&!this.state.videoDidEnd?!1:this.state.hideItemBufferExpired};a.prototype.$14=function(){if(!this.state.loading)return!1;return this.state.videoDidPlay?this.state.videoDidEnd?!0:!1:!0};a.prototype.componentDidUpdate=function(){this.$12()&&(new(b("GamerGraphUserActionsTypedLogger"))().setEvent(b("GamerGraphUserActionsEvent").INSTREAM_REWARD_ALERT_EXPIRE).setContainerID(this.props.ownerID).setTargetID(this.props.videoID).setGameID(this.props.gameID).log(),this.props.onRemove&&this.props.onRemove())};a.prototype.$15=function(a){var b=h._("{Loot Item Name} (revendiqu\u00e9)",[h._param("Loot Item Name",a.name)]);return{handleOnClick:this.$8,displayName:b,assetURI:a.idleURI,showClaimButton:!1,idle:!0}};a.prototype.$16=function(a){return{displayName:a.name,assetURI:a.openURI,showClaimButton:!0,idle:!1}};a.prototype.$17=function(a){return{handleOnClick:this.$7,displayName:a.name,assetURI:a.idleURI,showClaimButton:!0,idle:!0}};a.prototype.render=function(){if(this.$12())return null;var a=void 0;this.$13()&&this.state.lootItem?a=this.$15(this.state.lootItem):this.state.claimed?a=this.$16(this.props.lootChest):a=this.$17(this.props.lootChest);return b("React").createElement(b("VideoComponentLootDropAlert.react"),{className:"_3p35",onClaim:a.handleOnClick,onClose:this.$8,onGift:this.$11,onChange:this.$9,src:a.assetURI,itemTitle:a.displayName,idle:a.idle,isLoading:this.state.loading,secondsLeft:this.state.claimed?null:this.state.secondsLeft,showClaimButton:!this.state.claimed,showCloseButton:this.$13()&&(this.state.lootItem==null||!this.state.lootItem.reward),showGiftButton:this.state.lootItem!=null&&this.state.lootItem.reward,onPlay:function(){this.setState({videoDidPlay:!0})}.bind(this),onEnded:function(){this.setState({videoDidEnd:!0})}.bind(this),canShowLoadingSpinner:this.$14(),reward:this.state.lootItem!=null&&this.state.lootItem.reward})};e.exports=a}),null);
__d("VideoNotificationDispatcher",["ExplicitRegistrationReactDispatcher"],(function(a,b,c,d,e,f){"use strict";e.exports=new(b("ExplicitRegistrationReactDispatcher"))({strict:!0})}),null);
__d("VideoNotificationActions",["React","VideoNotificationDispatcher"],(function(a,b,c,d,e,f){"use strict";var g={SEND_NOTIFICATION:"SEND_NOTIFICATION",REMOVE_NOTIFICATION:"REMOVE_NOTIFICATION"};e.exports={VideoNotificationActionTypes:g,sendNotification:function(a,c){b("VideoNotificationDispatcher").dispatch({videoPlayerController:a,videoPlayerID:a.getVideoPlayerID(),type:g.SEND_NOTIFICATION,notificationElement:c})},removeNotification:function(a,c){b("VideoNotificationDispatcher").dispatch({videoPlayerID:a,type:g.REMOVE_NOTIFICATION,notificationIndex:c})}}}),null);
__d("XLootDropPollController",["XController"],(function(a,b,c,d,e,f){e.exports=b("XController").create("/video/lootdrop/poll/{video_id}/",{video_id:{type:"FBID",required:!0},first_heartbeat:{type:"Bool",defaultValue:!1}})}),null);
__d("VideoWithLootDrop",["AsyncRequest","AsyncResponse","React","XLootDropPollController","VideoNotificationActions","VideoLootDropAlertContainer.react","once"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=60;function a(a,c,d){this.$2=0,this.$3=0,this.$4=0,this.$12=function(a){a.payload&&b("VideoNotificationActions").sendNotification(this.$1,b("React").createElement(b("VideoLootDropAlertContainer.react"),{lootChest:a.payload,videoID:this.$1.getVideoID(),ownerID:this.$6,gameID:this.$7}))}.bind(this),this.$10=b("once")(function(){new(b("AsyncRequest"))().setURI(b("XLootDropPollController").getURIBuilder().setFBID("video_id",this.$1.getVideoID()).setBool("first_heartbeat",!0).getURI()).setMethod("POST").send()}.bind(this)),this.$1=a,this.$6=c,this.$7=d,a.addListener("beginPlayback",this.$8.bind(this)),a.addListener("updateStatus",this.$9.bind(this)),this.$10()}a.prototype.$8=function(a){this.$2=a.position};a.prototype.$9=function(a){var b=a.position-this.$2;this.$2=a.position;if(this.$1.isInline())return;this.$3+=b;this.$3-this.$4>g&&this.$11()};a.prototype.$11=function(){this.$5&&this.$5.abort(),this.$4=this.$3,this.$5=new(b("AsyncRequest"))().setURI(b("XLootDropPollController").getURIBuilder().setFBID("video_id",this.$1.getVideoID()).getURI()).setMethod("POST").setHandler(this.$12),this.$5.send()};e.exports=a}),null);
__d("VideoNotificationReduceStore",["VideoNotificationActions","VideoNotificationDispatcher","FluxReduceStore","immutable","React"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h,i=b("VideoNotificationActions").VideoNotificationActionTypes;g=babelHelpers.inherits(j,b("immutable").Record({components:b("immutable").Map(),notificationCount:0}));g&&g.prototype;function j(){g.apply(this,arguments)}h=babelHelpers.inherits(a,b("FluxReduceStore"));h&&h.prototype;a.prototype.getInitialState=function(){return new j()};a.prototype.$VideoNotificationReduceStore1=function(a,c){var d=a.components.get(c.videoPlayerID,b("immutable").OrderedMap()),e=a.notificationCount;e={notificationIndex:e,videoPlayerID:c.videoPlayerID,notif:b("React").cloneElement(c.notificationElement,{key:"notification_"+e})};d=d.set(a.notificationCount,e);e=a.components.set(c.videoPlayerID,d);return new j({components:e,notificationCount:a.notificationCount+1})};a.prototype.$VideoNotificationReduceStore2=function(a,b){var c=a.components.get(b.videoPlayerID);if(!c)return a;c=c.remove(b.notificationIndex);b=a.components.set(b.videoPlayerID,c);return new j({components:b,notificationCount:a.notificationCount})};a.prototype.reduce=function(a,b){switch(b.type){case i.SEND_NOTIFICATION:return this.$VideoNotificationReduceStore1(a,b);case i.REMOVE_NOTIFICATION:return this.$VideoNotificationReduceStore2(a,b);default:return a}};a.prototype.getCurrentNotification=function(a){var b=this.getState();b=b.components.get(a.getVideoPlayerID());return!b||b.isEmpty()?null:b.first()};function a(){h.apply(this,arguments)}a.__moduleID=e.id;e.exports=new a(b("VideoNotificationDispatcher"))}),null);
__d("VideoWithNotificationQueue.react",["cx","VideoNotificationDispatcher","FluxContainer","FluxStore","React","VideoNotificationReduceStore","VideoNotificationActions"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i,j=b("VideoNotificationActions").removeNotification;d=babelHelpers.inherits(a,b("React").PureComponent);h=d&&d.prototype;function a(a){h.constructor.call(this,a),this.state={currentNotification:null},b("VideoNotificationDispatcher").explicitlyRegisterStores([b("VideoNotificationReduceStore")])}a.getStores=function(){return[b("VideoNotificationReduceStore")]};a.calculateState=function(a,c){var d=b("VideoNotificationReduceStore").getCurrentNotification(c.videoController);if(!d)return{currentNotification:null};a=function(){j(d.videoPlayerID,d.notificationIndex)};return{currentNotification:b("React").cloneElement(d.notif,{onRemove:a,videoPlayerID:d.videoPlayerID})}};a.prototype.render=function(){return b("React").createElement("div",{className:"_jwg"},b("React").createElement("div",{className:"_jwh"},this.state.currentNotification))};var k=b("FluxContainer").create(a,{withProps:!0});i=babelHelpers.inherits(c,b("React").PureComponent);i&&i.prototype;c.prototype.render=function(){return b("React").createElement(k,this.props)};function c(){i.apply(this,arguments)}e.exports=c}),null);